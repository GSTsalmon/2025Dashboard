---
title: "Cowichan River Water Quality Monitoring 2025"
output: 
  flexdashboard::flex_dashboard:
    orientation: rows
    vertical_layout: fill
    self_contained: false  # Change 1: Set to false to reduce HTML file size

---

```{r setup, include=FALSE}
library(flexdashboard)
library(ggplot2)
library(tidyverse)
library(plotly)
```

# DO {data-orientation="rows"}

## Row {data-height="650"}

### Dissolved Oxygen values in 2025

```{r}
DOSaysells2025 <- read.csv("https://raw.githubusercontent.com/GSTsalmon/2025Data/refs/heads/main/DOSaysell's2025.csv")
DOSaysells2025$Date.Time..PDT. <- as.POSIXct(DOSaysells2025$Date.Time..PDT., format = "%m/%d/%Y %H:%M")
DOSaysells2025$Site <- "Saysell's"
DOSaysells2025$Site<-factor(DOSaysells2025$Site,levels=c("Saysell's","70.2 Trestle","Skutz Falls", "US JUB", "DS JUB"))
data.table::setnames(DOSaysells2025,'Temperature.....C..W.DO.22225592.','Temp')
data.table::setnames(DOSaysells2025,'Measured.DO....mg.L..W.DO.22225592.','DO')
filtered_SaysellsDOdata <- na.omit(DOSaysells2025)



DOTrestle2025 <- read.csv("https://raw.githubusercontent.com/GSTsalmon/2025Data/refs/heads/main/DOTrestle2025.csv")
DOTrestle2025$Date.Time..PDT. <- as.POSIXct(DOTrestle2025$Date.Time..PDT., format = "%m/%d/%Y %H:%M")
DOTrestle2025$Site <- "70.2 Trestle"
DOTrestle2025$Site<-factor(DOTrestle2025$Site,levels=c("Saysell's","70.2 Trestle","Skutz Falls", "US JUB", "DS JUB"))
data.table::setnames(DOTrestle2025,'Temperature.....C..W.DO.22225611.','Temp')
data.table::setnames(DOTrestle2025,'Measured.DO....mg.L..W.DO.22225611.','DO')
filtered_TrestleDOdata <- na.omit(DOTrestle2025)

MasterDO2025<- rbind(filtered_SaysellsDOdata,filtered_TrestleDOdata)

DOplot<- ggplot(MasterDO2025, aes(x = Date.Time..PDT., y = DO, colour = Site, shape = Site)) +
  geom_point(alpha = 0.8, size = 1.7) +
  scale_x_datetime(date_labels = "%e-%b", date_breaks = "1 day") +
  xlab("") + ylim(0,25) +
  ylab("Dissolved Oxygen (mg/l)") +
  theme_classic()
ggplotly(DOplot)
```

# pH {data-orientation="rows"}

## Row {data-height="650"}

### pH
```{r}
#pH Data
pHSaysells2025 <- read.csv("https://raw.githubusercontent.com/GSTsalmon/2025Data/refs/heads/main/pHSaysell's2025.csv")
pHSaysells2025$Date.Time..PDT. <- as.POSIXct(pHSaysells2025$Date.Time..PDT., format = "%m/%d/%Y %H:%M")
pHSaysells2025$Site <- "Saysell's"
pHSaysells2025$Site<-factor(pHSaysells2025$Site,levels=c("Saysell's","70.2 Trestle","Skutz Falls", "US JUB", "DS JUB"))
data.table::setnames(pHSaysells2025,'pH....pH.','pH')
filtered_SaysellspHdata <- na.omit(pHSaysells2025)


pHTrestle2025 <- read.csv("https://raw.githubusercontent.com/GSTsalmon/2025Data/refs/heads/main/pHTrestle2025.csv")
pHTrestle2025$Date.Time..PDT. <- as.POSIXct(pHTrestle2025$Date.Time..PDT., format = "%m/%d/%Y %H:%M")
pHTrestle2025$Site <- "70.2 Trestle"
pHTrestle2025$Site<-factor(pHTrestle2025$Site,levels=c("Saysell's","70.2 Trestle","Skutz Falls", "US JUB", "DS JUB"))
data.table::setnames(pHTrestle2025,'pH....pH.','pH')
filtered_TrestlepHdata <- na.omit(pHTrestle2025)

MasterpH2025<- rbind(filtered_SaysellspHdata,filtered_TrestlepHdata)


pHPlot<- ggplot(data=MasterpH2025,aes(x=Date.Time..PDT., y=pH,
                                     colour=Site, shape=Site))+
  geom_point( alpha = 0.8, size = 1.7)+
  scale_x_datetime(date_labels= "%e-%b", date_breaks="1 days")+
  xlab("")+
  ylab("pH")+
  theme_classic() 
 
ggplotly(pHPlot)

```

# Temp {data-orientation="rows"}

## Row {data-height="650"}

### Temperature

```{r}
TempPlot<- ggplot(data=MasterDO2025,aes(x=Date.Time..PDT., y=Temp,
                                    colour=Site, shape=Site))+
  geom_point( alpha = 0.8, size = 1.7)+
  scale_x_datetime(date_labels= "%e-%b", date_breaks="1 days")+
  xlab("")+
  ylab("Temperature") +
  theme_classic() 
ggplotly(TempPlot)
```

